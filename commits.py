# finance_tracker.py
# Персональный помощник для учета финансов
# Полная версия проекта

# ========== КОНСТАНТЫ И ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ==========
# Эти переменные будут хранить данные во время работы программы
BALANCE = 0.0
HISTORY = []

# ========== ФУНКЦИИ ДЛЯ РАБОТЫ С БАЛАНСОМ ==========
def show_balance():
    """Показывает текущий баланс пользователя"""
    print(f"\n=== Ваш текущий баланс: {BALANCE:.2f} руб. ===")

def add_income():
    """
    Добавляет доход к балансу
    Запрашивает у пользователя сумму и добавляет ее к балансу
    """
    global BALANCE, HISTORY  # Позволяем функции изменять глобальные переменные
    
    try:
        # Запрашиваем сумму дохода у пользователя
        amount = float(input("Введите сумму дохода: "))
        
        # Проверяем, что сумма положительная
        if amount <= 0:
            print("Ошибка: Сумма дохода должна быть положительной!")
            return

        # Обновляем баланс и историю
        BALANCE += amount
        HISTORY.append(f"Доход: +{amount:.2f} руб.")
        print(f"Доход в размере {amount:.2f} руб. успешно добавлен!")
        
    except ValueError:
        # Обрабатываем случай, когда пользователь ввел не число
        print("Ошибка! Пожалуйста, введите числовое значение.")

def add_expense():
    """
    Добавляет расход к балансу
    Проверяет, достаточно ли средств перед списанием
    """
    global BALANCE, HISTORY
    
    try:
        amount = float(input("Введите сумму расхода: "))
        
        if amount <= 0:
            print("Ошибка: Сумма расхода должна быть положительной!")
            return

        # Проверяем, хватает ли денег на балансе
        if amount > BALANCE:
            print("Ошибка: Недостаточно средств на балансе!")
            return

        # Вычитаем сумму расхода и добавляем запись в историю
        BALANCE -= amount
        HISTORY.append(f"Расход: -{amount:.2f} руб.")
        print(f"Расход в размере {amount:.2f} руб. успешно добавлен!")
        
    except ValueError:
        print("Ошибка! Пожалуйста, введите числовое значение.")

# ========== ФУНКЦИИ ДЛЯ РАБОТЫ С ИСТОРИЕЙ ==========

def show_history():
    """Показывает всю историю финансовых операций"""
    print("\n=== История операций ===")
    
    # Проверяем, есть ли операции в истории
    if not HISTORY:
        print("История операций пуста.")
    else:
        # Выводим все операции с нумерацией
        for i, operation in enumerate(HISTORY, 1):
            print(f"{i}. {operation}")
    
    print("=======================")

def clear_history():
    """Очищает всю историю операций"""
    global HISTORY
    
    # Запрашиваем подтверждение от пользователя
    confirm = input("Вы уверены, что хотите очистить историю? (да/нет): ")
    
    if confirm.lower() == 'да':
        HISTORY.clear()
        print("История операций очищена!")
    else:
        print("Очистка истории отменена.")   